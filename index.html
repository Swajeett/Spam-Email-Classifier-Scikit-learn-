<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email Spam Detector</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; background: #f4f4f9; }
    h1 { color: #333; }
    form { margin-bottom: 20px; }
    textarea { width: 100%; height: 150px; padding: 10px; font-size: 14px; }
    input[type="submit"] {
      padding: 10px 20px;
      background: #007BFF;
      border: none;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
      border-radius: 4px;
    }
    input[type="submit"]:hover { background: #0056b3; }
    .result { margin-top: 20px; padding: 15px; background: #fff; border-radius: 4px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    .spam { color: red; font-weight: bold; }
    .ham { color: green; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Email Spam Detection</h1>
  <form method="POST">
    <label for="email">Paste your email text:</label><br>
    <textarea name="email" id="email">{{ request.form.get('email', '') }}</textarea><br><br>
    <input type="submit" value="Check Spam">
  </form>

  {% if prediction is not none %}
  <div class="result">
    <p>Prediction:
      {% if prediction == 1 %}
        <span class="spam">Spam</span>
      {% else %}
        <span class="ham">Not Spam</span>
      {% endif %}
    </p>
    <p>Probability (spam): {{ "%.2f"|format(probability * 100) }}%</p>
  </div>
  {% endif %}

  <div class="result">
    <h3>Model Performance</h3>
    <p>Accuracy: {{ "%.4f"|format(accuracy) }}</p>
    <p>MSE: {{ "%.4f"|format(mse) }}</p>
    <img src="{{ url_for('static', filename='roc_curve.png') }}" alt="ROC Curve" width="400">
    <img src="{{ url_for('static', filename='confusion_matrix.png') }}" alt="Confusion Matrix" width="400">
  </div>
</body>
</html>
